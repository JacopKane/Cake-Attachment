CakePHP plugin to manage file upload and image thumbnails:
http://www.cakephp.org

HOW TO INSTALL?
Put the dir `cake_attachment` in yours plugins dir.

See the following example on how to use the plugin...

We have to manage the uploading of the image and pdf fields.
So in the our model you put the following lines:


<?php
class MyModel extends AppModel {

    public $name = 'MyModel';

    //require the UploadBehaviour
    public $actsAs = array(
        'CakeAttachment.Upload' => array(
            'image' => array(
                'dir' => "{IMAGES}my_dir",
		//thumbnails declaration
                'thumbsizes' => array(
                    'main' => array('width' => 500, 'height' => 'auto', 'name' =>  'main.{$file}.{$ext}'),
		    'preview' => array('width' => 250, 'height' => 250, 'name' => 'preview.{$file}.{$ext}')
                    'thumb' => array('width' => 100, 'height' => 100, 'name' =>  'thumb.{$file}.{$ext}', 'proportional' => false)
                )
            ),
	    'pdf' => array(
		'uniqidAsFilenames' => true, //OPTIONAL: the default value is false
		'dir' => "{FILES}uploaded_pdf"
	    )
        )
    );

    //File validations..
    public $validate = array(
        'image' => array(
            'notEmpty' => array(
                'rule' => 'requiredFile',
                'message' => 'File required',
                'on' => 'create'
            ),
            'valid_upload' => array (
                'rule' => array('validateUploadedFile'),
                'message' => 'Invalid file'
            ),
            'validFile' => array (
                'rule' => array('validateFileExtension', array('jpg', 'jpeg', 'png', 'gif')),
                'message' => 'Invalid file: upload only jpg, png or gif'
            ),
            'maxFileSize' => array(
                'rule' => array('maxFileSize', 2097152),
                'message' => 'Invalid file'
            ),
            'notOverwriteFile' => array(
                'rule' => array('denyOverwriteFile'),
                'message' => 'File already exists'
            )
        ),
	'pdf' => array(
            'valid_upload' => array (
                'rule' => array('validateUploadedFile'),
                'message' => 'Invalid file'
            ),
            'validFile' => array (
                'rule' => array('validateFileExtension', array('pdf')),
                'message' => 'Invalid file: upload only jpg, png or gif'
            ),
            'maxFileSize' => array(
                'rule' => array('maxFileSize', 2097152),
                'message' => 'Invalid file'
            )
        )

    );

}
?>


This is all you need to upload your files on record save :)
	
for more details see the source code


